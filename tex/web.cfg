\Preamble{xhtml,3,sec-filename,info}

\Configure{AddCss}{css/style.css}
\Configure{AddJs}{js/toc.js}

\Configure{Gin-dim}{} 
\Css{img { 
    max-width: 100\%; 
    height: auto; 
}} 
\Configure{CutAt-filename}{\NextFile{\detokenize{#2}.html}}
% Mini TOC
\Configure{crosslinks+}{%
  \bgroup
  % container for the page toc
  \Configure{tableofcontents}{\IgnorePar\EndP\HCode{<nav class="TOC">}\IgnorePar}
  {\HCode{\Hnewline}}{\IgnorePar\HCode{</nav>\Hnewline}\ShowPar}{}{}%
  \TableOfContents[chapter,likechapter,section,likesection]% Print table of contents before crosslinks
  \egroup
  \ifvmode\IgnorePar\fi\EndP%
  \HCode{<main class="main-content">\Hnewline<nav class="crosslinks-top">} }
  {\HCode{</nav>\Hnewline}}%
{\ifvmode\IgnorePar\fi\EndP%
  \HCode{<nav class="crosslinks-bottom">}}{\HCode{</nav>}}{}{}
% close the <main> element started in \Configure{crosslinks+}
\gdef\endmainbody{\HCode{</main>}}
\Configure{@/BODY}{\ifvmode\IgnorePar\fi\EndP\endmainbody}
% show only crosslinks to prev, main and next pages
\Configure{crosslinks*}{prev}{up}{next}{}

\begin{document}
\EndPreamble
